{% extends "base.html" %}

{% block head %}
	<style>
		body {
			display: grid;
			grid-template-columns: minmax(20%, 40%) 1fr;
			min-height: 100vh;
  		padding: var(--gap-l);
			background-image: url("https://wesbos.com/static/whitegrit-3c286f3a0990b91b9f6bb97828dd3d2f.png");
			background-position: top center;
			background-color: black;
		}

		.Main {
			border-radius: var(--radius-l);
			box-shadow: 0.1rem 0.1rem 0.1rem rgba(0, 0, 0, 0.16);
		}

		.IngredientForm details {
			margin-block: var(--gap-xs);
			border: 1px solid hsla(var(--guideline-hsl), var(--hinted-opacity));
			border-radius: var(--radius-s);
		}

		.IngredientForm details > summary {
			padding: var(--gap-xs) var(--gap-s);
			font-size: var(--text-l);
			color: hsla(var(--text-hsl), var(--hinted-opacity));
			cursor: pointer;
		}

		.IngredientForm details > summary::marker {
			content: "";
		}

		.IngredientForm details[open] > summary {
			font-weight: bold;
		}

		.IngredientForm details:not([open]) > summary:hover {
			color: hsl(var(--primary-hsl), var(--hinted-opacity));
		}

		.IngredientSelector {
			display: flex;
			align-items: center;
			gap: var(--gap-s);
			padding: var(--gap-xs) var(--gap-s);
		}

		.IngredientSelector:not(:last-of-type) {
			border-block-end: 1px solid hsla(var(--guideline-hsl), var(--hinted-opacity));
		}

		.IngredientSelector > span {
			flex-grow: 1;
		}

		.IngredientSelector > label,
		.IngredientSelector > a {
			padding: var(--gap-xs) var(--gap-s);
			border: 0.1rem solid hsl(var(--guideline-hsl));
			border-radius: var(--radius-s);
			color: inherit;
			text-decoration: none;
			cursor: pointer;
		}

		.IngredientSelector > label:hover,
		.IngredientSelector > a:hover {
			border-color: hsl(var(--primary-hsl));
			color: hsl(var(--primary-hsl));
		}

		.IngredientSelector > input[type=checkbox] {
			position: absolute;
			opacity: 0;
			pointer-events: none;
		}

		.IngredientSelector > input[type=checkbox] + label::before {
			content: "Add";
		}

		.IngredientSelector > input[type=checkbox]:checked + label::before {
			content: "Remove";
		}
	</style>
{% endblock %}

{% block body %}
	<main class="Main">
		<h1 class="Title">Cookpot</h1>

		<div class="IngredientForm">
			{% for ingredients in ingredient_library %}
				<details>
					<summary>{{ ingredients.0.category_label }}</summary>

					{% for ingredient in ingredients %}
						<div class="IngredientSelector">
							<span>{{ ingredient.display_name }}</span>

							<input id="ingredient{{ ingredient.pk }}" type="checkbox" name="ingredient{{ ingredient.pk }}" />
							<label for="ingredient{{ ingredient.pk }}"></label>

							<a href="https://cosylab.iiitd.edu.in/flavordb/entity_details?id={{ ingredient.flavordb_id }}" target="_blank" crossorigin="anonymous" referrerpolicy="no-referrer">FlavorDB</a>
						</div>
					{% endfor %}
				</details>
			{% endfor %}
		</div>
	</main>
{% endblock %}