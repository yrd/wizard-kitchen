{% extends "base.html" %}

{% block body %}
	<div class="Container">
		<header class="Infos">
			<h1>Wizard Kitchen</h1>
			<p class="NoScript">
				<strong>Heads up!</strong>
				JavaScript seems to be disabled in your browser, so this site probably won't work the way you expect.
			</p>
			<p>
				Greetings!
				How do you rate yourself as a cook?
				A learner?
				Somewhat experienced?
				Or do you even dare to call yourself a kitchen master?
				Even so &ndash; that title has now become completely moot!
			</p>
			<p>
				With the Wizard Kitchen, anyone can master the fine art of cookery!
				Toss up a few ingredients in your cauldron and the menu will complete itself.
				As if through magic <small>(science and some maths)</small>, the kitchen will tell you exactly what is missing to make your mere snack a delicacy!
			</p>
			<p>
				<button id="results-button" class="HeroButton">Query!</button>
			</p>
			<p>
				<small>
					Start by adding a few ingredients through the menus below.
					Then, use the button above to produce a report!
				</small>
			</p>
		</header>

		<div class="Cauldron">
			<svg viewBox="0 0 370.4167 317.5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
				<defs>
					<linearGradient id="cauldron-body-fill" x1="36" y1="120" x2="157" y2="162" gradientUnits="userSpaceOnUse">
						<stop offset="0" />
						<stop offset="1" />
					</linearGradient>

					<linearGradient id="fire-base-fill" x1="186.6475" y1="262.2056" x2="185.6691" y2="294.4612" gradientUnits="userSpaceOnUse">
						<stop offset="0" />
						<stop offset="1" />
					</linearGradient>

    			<linearGradient id="drop-fill" x1="183.1285" y1="23.4169" x2="196.4846" y2="40.6319" gradientUnits="userSpaceOnUse">
						<stop offset="0" />
						<stop offset="1" />
					</linearGradient>

					<filter id="dirt-filter" x="-100%" y="-100%" width="300%" height="300%">
						<feGaussianBlur result="result0" in="SourceGraphic" stdDeviation="0.2"/>
						<feTurbulence result="result1" numOctaves="4" baseFrequency=".1"/>
						<feDisplacementMap in="result0" in2="result1" scale="80" yChannelSelector="G" xChannelSelector="R" />
						<feColorMatrix result="result3" values="2 0 0 0 0 0 2 0 0 0 0 0 2 0 0 0 0 0 0.7 0" />
						<feGaussianBlur result="result4" in="SourceGraphic" stdDeviation="2"/>
						<feComposite in="result3" in2="result4"/>
					</filter>
				</defs>

				<g class="wood">
					<path class="log" d="m135.0001 284.7442 47.3784-20.2542 8.7944 8.692-47.8124 29.1866" />
					<path class="log" d="m154.661 298.2698 28.2305-27.0723 9.1979 5.1528-23.8403 33.1655" />
					<path class="log" d="m207.0308 309.2938-25.998-31.9022 6.7366-6.2002 31.6339 25.149" />
					<path class="log" d="m232.317 302.1772-30.6848-18.8198 2.574-11.0525 37.3103 14.8" />
					<path class="log" d="m177.2828 308.7312 4.9587-38.7979 10.3935-1.7687 2.2848 40.781" />
					<ellipse class="log-face" cx="32.3966" cy="324.0736" rx="7.9962" ry="9.7691" transform="matrix(.93292 -.36007 .3361 .94182 0 0)" />
					<ellipse class="log-face" cx="-193.4163" cy="274.4367" rx="8.7995" ry="8.7324" transform="matrix(.41981 -.90761 .883 .46938 0 0)" />
					<ellipse class="log-face" cx="-361.2193" cy="-62.274" rx="8.5581" ry="8.9869" transform="matrix(-.7047 -.7095 .65841 -.75266 0 0)" />
					<ellipse class="log-face" cx="-327.5482" cy="-200.5079" rx="6.9833" ry="8.9153" transform="matrix(-.94437 -.3289 .36043 -.93279 0 0)" />
					<ellipse class="log-face" cx="-337.226" cy="95.1254" rx="7.8502" ry="8.7273" transform="matrix(-.2739 -.96176 .98584 -.16771 0 0)" />
					<path class="scratch" d="M141.1717 288.9608c-1.248-.2681-2.496-.5363-3.7269.0421-1.2308.5783-2.4437 2.003-2.5581 3.6478-.1144 1.6447.8694 3.5093 2.2284 4.534 1.359 1.0246 3.0927 1.2095 4.1765.4395s1.5177-2.495 1.9517-4.2202" />
					<path class="scratch" d="M161.2286 298.985c-1.2615.1435-2.5228.287-3.5924 1.3099-1.0695 1.0229-1.9467 2.925-1.5157 4.8114.431 1.8864 2.1697 3.7571 4.0761 4.274 1.9065.517 3.9802-.3197 5.0777-1.635 1.0976-1.3155 1.2186-3.1096 1.3396-4.9039" />
					<path class="scratch" d="M210.2489 300.1672c-.8505 1.8292-1.7009 3.6582-1.2702 5.1587.4306 1.5004 2.142 2.672 3.9089 2.88 1.767.208 3.5897-.5472 4.631-1.7287 1.0413-1.1814 1.3012-2.7891.756-4.2626-.5452-1.4735-1.8959-2.8126-3.2468-4.152" />
					<path class="scratch" d="M233.1362 296.7396c.542 1.1232 1.0838 2.246 2.1327 2.632 1.049.386 2.6047.0357 3.8361-.712 1.2314-.7479 2.1385-1.8931 2.3788-3.602.2404-1.7089-.1862-3.9816-1.2803-4.8488-1.0941-.8673-2.8559-.3287-4.618.2099" />
					<path class="scratch" d="M183.6293 304.1207c-1.1538 1.2512-2.3074 2.5023-2.485 3.864-.1776 1.3617.621 2.8333 2.1331 3.7681 1.512.9348 3.7369 1.3329 5.299.6873 1.562-.6456 2.4606-2.3344 2.2507-3.8868-.21-1.5523-1.529-2.9677-2.848-4.3831" />
				</g>

				<g class="cauldron">
					<path class="cauldron-body" d="M130.7515 200.0584c-4.9432 14.7717-9.8862 29.5432-7.5475 44.9167 2.3387 15.3735 11.9589 31.349 30.5378 39.3745 18.579 8.0256 49.2772 8.1104 66.4167.9976 17.1395-7.1128 27.0418-21.4058 30.0471-36.7029 3.0053-15.297-.8864-31.5983-4.7782-47.9" fill="url(#cauldron-body-fill)" />
					<ellipse class="cauldron-neck" cx="189.1579" cy="196.1543" rx="63.0523" ry="18.1282" />
					<ellipse class="cauldron-top" cx="189.0962" cy="192.6953" rx="63.0523" ry="18.1282" />

					<mask id="cauldron-content-mask">
						<path class="cauldron-content" d="M247.8531 192.4978c0 3.3887-4.7192 6.5056-12.626 8.9734-1.483.4628 1.7182 4.2732-2.0264 6.469-5.9757 3.504-.4389 7.89-7.3495 9.6696-3.352.8632-2.0167-5.5223-6.5766-5.1883-3.9234.2874-2.0369-7.1435-6.5905-6.6505-7.2275.7824-15.216 1.2166-23.6159 1.2166-10.3594 0-20.093-.6605-28.5453-1.82-2.1992-.3016-4.9709.5324-6.9851.166-2.1242-.3864-3.48-1.9767-5.372-2.4286-11.028-2.6339-17.8825-6.3232-17.8825-10.4072 0-4.5989 8.692-8.6973 22.2474-11.3517 2.7835-.545-.3414-3.3834 2.8191-3.7985 1.6766-.2202 10.178-1.9535 13.5885-1.4996 2.653.3531.8126 2.9541 2.4176 2.8293 5.5895-.4348 11.5398-.6693 17.7123-.6693 7.1898 0 14.078.3181 20.4458.9004 3.7942.347 7.4036.7878 10.7819 1.3109 2.9279.4534 5.6822.9686 8.2327 1.5383 11.8693 2.6511 19.3245 6.481 19.3245 10.7402z" fill="white" />
					</mask>
					<g class="cauldron-content" mask="url(#cauldron-content-mask)">
						<rect x="0" y="0" width="100%" height="100%" />
						<path d="M193.586 168.8782c-.4837 2.1087-.0841 4.3034.0453 6.4629.0647 1.0798.06 2.172-.156 3.232-.2162 1.0599-.6544 2.0914-1.3768 2.8965-.6469.721-1.505 1.2393-2.4273 1.5357-.9223.2963-1.907.376-2.8722.2943-1.9305-.1635-3.7502-.9542-5.4726-1.8412-1.7224-.887-3.4-1.8861-5.2303-2.521-1.8305-.635-3.8706-.883-5.6967-.2357-1.6496.5849-3.008 1.8823-3.785 3.4507-.7769 1.5683-.9906 3.3874-.7283 5.1179.2622 1.7305.985 3.3737 1.9746 4.8173.9896 1.4436 2.2412 2.6945 3.603 3.794 4.8133 3.8858 10.8912 5.8428 16.9324 7.1737 3.8314.844 7.9054 1.4563 11.6157.1813 1.8551-.6375 3.571-1.7597 4.7434-3.3325 1.1722-1.5728 1.7625-3.6124 1.4196-5.5438-.2373-1.3366-.8922-2.5568-1.537-3.7513-.6449-1.1945-1.2983-2.4159-1.532-3.753-.229-1.31-.0386-2.6686.3795-3.931.4182-1.2625 1.0575-2.4399 1.7409-3.5808 1.3666-2.2819 2.9592-4.5411 3.3819-7.1672.297-1.8452-.0306-3.7925-.9548-5.417-.924-1.6245-2.4454-2.9092-4.2165-3.506-2.0182-.6799-4.3224-.4387-6.168.624-1.8454 1.0627-3.2067 2.9245-3.6828 5.0002z" />
						<path d="M188.8503 216.8654c-1.5535.4907-3.2552.4303-4.8137-.044-1.5585-.4744-2.9782-1.3487-4.1976-2.429-2.4388-2.1605-4.0547-5.0765-5.6237-7.932-1.0047-1.8287-2.0134-3.6653-2.7414-5.6207-.728-1.9553-1.1703-4.0486-.9995-6.1281.1708-2.0795.996-4.1474 2.5112-5.5819.7576-.7173 1.6786-1.267 2.6803-1.5584 1.0017-.2913 2.0835-.32 3.0903-.0466 1.117.3033 2.112.9647 2.95 1.763.8381.7984 1.5323 1.7337 2.2038 2.6765.6716.9427 1.3276 1.9011 2.1026 2.7608.775.8597 1.6801 1.6242 2.7384 2.0932 1.4214.6298 3.0563.689 4.5711.3393 1.515-.3496 2.9186-1.0888 4.1837-1.9925 2.5303-1.8072 4.5346-4.2604 7.0001-6.155 1.551-1.192 3.3077-2.1659 5.2223-2.5667 1.9146-.4008 4.0018-.1868 5.6656.8418 1.3204.8162 2.3129 2.1031 2.9275 3.5286.6147 1.4254.8694 2.986.9167 4.5376.0946 3.1032-.617 6.1779-.6883 9.2817-.0453 1.9736.1686 3.9433.2325 5.9165.064 1.9732-.028 3.9831-.662 5.8527-.6339 1.8697-1.8666 3.6004-3.6268 4.4943-.8801.447-1.878.6737-2.8625.602-.9844-.0715-1.9519-.4482-2.6947-1.0982-.7384-.646-1.233-1.5331-1.556-2.4595-.323-.9264-.4862-1.8993-.6553-2.8657-.1692-.9664-.3474-1.938-.698-2.8543-.3506-.9163-.887-1.7832-1.6629-2.3838-.6038-.4674-1.3363-.7583-2.0912-.873-.755-.1147-1.5315-.0564-2.272.13-1.481.3727-2.7925 1.2412-3.9516 2.2356-1.159.9944-2.1941 2.125-3.3332 3.1421-1.1392 1.0172-2.4095 1.9337-3.8657 2.3937z" />
						<path d="M177.3545 195.2825c-1.743.89-3.0084 2.557-3.693 4.3904-.6847 1.8334-.833 3.8279-.75 5.7831.166 3.9105 1.2242 7.8418.5144 11.691-.564 3.0587-2.2783 5.8967-4.743 7.794-2.4645 1.8973-5.6594 2.8295-8.7546 2.5237-3.0952-.3058-6.0558-1.8536-8.0491-4.2412-1.9933-2.3877-2.9886-5.5904-2.6682-8.6842.21-2.0273.951-3.956 1.4475-5.9326.2483-.9884.4365-1.997.4637-3.0156.0272-1.0187-.1106-2.051-.4948-2.9948-.6467-1.5885-1.9611-2.8399-3.457-3.6789-1.4958-.839-3.1722-1.3009-4.8497-1.6577-1.6775-.3569-3.3782-.6172-5.0268-1.0903-1.6485-.4732-3.2633-1.1751-4.5517-2.3071-1.2291-1.0799-2.12-2.5273-2.589-4.0947-.469-1.5674-.5217-3.2498-.2121-4.8563.6193-3.213 2.6669-6.0403 5.2676-8.026 3.934-3.0035 9.0302-4.1737 13.9796-4.1386 4.9493.035 9.8174 1.1869 14.6089 2.4273 5.1508 1.3334 10.2886 2.7802 15.5536 3.5476 2.1916.3194 4.4029.5207 6.5715.9708 2.1685.45 4.3157 1.163 6.1428 2.4149 1.8271 1.2518 3.3173 3.0881 3.8393 5.2405.261 1.0762.2747 2.217-.004 3.2887-.2786 1.0718-.8538 2.0711-1.6714 2.818-1.0735.981-2.5141 1.49-3.9588 1.6564-1.4446.1664-2.9062.0138-4.3464-.187-1.4402-.2009-2.8793-.4505-4.3332-.4788-1.4539-.0283-2.9412.1762-4.2363.8374z" />
						<path d="M220.0707 187.474c-.7887.6764-1.3353 1.6149-1.6008 2.6194-.2655 1.0044-.2573 2.0716-.044 3.0885.4267 2.0336 1.6403 3.8175 3.015 5.3757 1.3747 1.5582 2.9344 2.9496 4.2513 4.557 1.317 1.6073 2.4044 3.4943 2.6062 5.5624.2082 2.1325-.582 4.3221-2.03 5.9016-1.4479 1.5794-3.5172 2.5479-5.65 2.7529-2.133.205-4.3142-.335-6.1618-1.42-1.8477-1.085-3.3641-2.6996-4.4275-4.5598-1.3357-2.3367-1.9539-5.0005-2.7237-7.5796-.7698-2.5791-1.7579-5.1934-3.6444-7.1132-1.6886-1.7184-3.9472-2.73-5.9623-4.0504-1.0075-.6603-1.9689-1.411-2.737-2.339-.768-.928-1.337-2.046-1.4826-3.2418-.1839-1.5105.327-3.057 1.2206-4.2885.8937-1.2315 2.1465-2.1686 3.4966-2.8704 2.7003-1.4037 5.7778-1.9073 8.5716-3.1139 5.2567-2.2701 9.2317-6.8952 14.5112-9.1118 3.4187-1.4353 7.2657-1.7752 10.9126-1.1058 3.6468.6695 7.0884 2.33 9.9779 4.6534 2.5985 2.0897 4.8014 4.7856 5.8218 7.9602.5102 1.5873.7164 3.2792.5318 4.9362-.1845 1.657-.7657 3.277-1.7343 4.634-1.166 1.6335-2.886 2.8582-4.8025 3.4535-1.9166.5952-4.0182.5624-5.9246-.0648-2.815-.9262-5.06-3.039-7.651-4.4775-1.2954-.7192-2.7087-1.277-4.1863-1.3873-1.4775-.1103-3.0292.2643-4.1539 1.229z" />
					</g>
					<path class="cauldron-content-rim" d="M247.8531 192.4978c0 3.3887-4.7192 6.5056-12.626 8.9734-1.483.4628 1.7182 4.2732-2.0264 6.469-5.9757 3.504-.4389 7.89-7.3495 9.6696-3.352.8632-2.0167-5.5223-6.5766-5.1883-3.9234.2874-2.0369-7.1435-6.5905-6.6505-7.2275.7824-15.216 1.2166-23.6159 1.2166-10.3594 0-20.093-.6605-28.5453-1.82-2.1992-.3016-4.9709.5324-6.9851.166-2.1242-.3864-3.48-1.9767-5.372-2.4286-11.028-2.6339-17.8825-6.3232-17.8825-10.4072 0-4.5989 8.692-8.6973 22.2474-11.3517 2.7835-.545-.3414-3.3834 2.8191-3.7985 1.6766-.2202 10.178-1.9535 13.5885-1.4996 2.653.3531.8126 2.9541 2.4176 2.8293 5.5895-.4348 11.5398-.6693 17.7123-.6693 7.1898 0 14.078.3181 20.4458.9004 3.7942.347 7.4036.7878 10.7819 1.3109 2.9279.4534 5.6822.9686 8.2327 1.5383 11.8693 2.6511 19.3245 6.481 19.3245 10.7402z" />

					<mask id="cauldron-dirt-mask">
						<path d="M130.7515 200.0584c-4.9432 14.7717-9.8862 29.5432-7.5475 44.9167 2.3387 15.3735 11.9589 31.349 30.5378 39.3745 18.579 8.0256 49.2772 8.1104 66.4167.9976 17.1395-7.1128 27.0418-21.4058 30.0471-36.7029 3.0053-15.297-.8864-31.5983-4.7782-47.9" fill="white" />
					</mask>
					<g class="cauldron-dirt" mask="url(#cauldron-dirt-mask)">
						<path transform="matrix(.26458 0 0 .26458 98.1065 105.3956)" d="M234.414 552.1273c-14.0795 7.362-6.0224 32.003-14.6111 45.3696-6.7543 10.5116-15.2004 24.6242-27.6779 25.2776-16.4966.8639-33.7313-14.0844-39.8836-29.4151-4.547-11.3305 9.7278-24.3766 6.2708-36.0857-2.5958-8.792-10.4692-16.0967-18.6703-20.193-5.2503-2.6223-14.3805 3.1708-17.515-1.7908-7.8469-12.4212 14.212-26.842 14.7839-41.523.4294-11.0237-12.368-21.5642-8.6419-31.9479 2.955-8.235 15-9.232 21.3992-15.1984 5.6251-5.2447 8.5327-13.1597 14.6425-17.8309 5.875-4.4917 14.308-13.5107 20.2377-9.0914 10.3234 7.6936-15.4125 30.583-5.0968 38.287 9.6166 7.1819 20.8864-14.106 32.8747-14.6896 10.0746-.4905 18.7189 11.0877 28.6955 9.6027 10.2618-1.5276 15.0385-16.9875 25.3593-18.0456 11.332-1.1618 26.1243 3.5964 31.2852 13.7516 8.8141 17.3438-6.5008 38.5065-12.5254 57.0052-6.1677 18.938-5.9069 46.3993-24.0036 54.718-8.524 3.9182-18.6097-12.5474-26.9232-8.2003z" filter="url(#dirt-filter)" />
						<path d="M235.9326 257.9237c-2.4163 5.5096-7.5288 10.9224-13.4388 12.0477-9.719 1.8504-26.1508-.5558-27.8346-10.3051-.833-4.823 9.1769-4.9931 11.262-9.4211 1.713-3.6379.445-8.0592.0723-12.063-.483-5.1883-6.0963-11.1715-2.9778-15.346 1.7095-2.2885 5.8232.092 8.5297-.8211 3.7456-1.2636 6.2609-7.2651 10.0804-6.2466 3.2335.8623 1.5551 7.8973 4.7675 8.8355 4.6937 1.3707 8.5197-9.461 12.819-7.1317 2.802 1.518 1.2296 6.3995.6694 9.5366-.604 3.3825-3.5364 6.0335-4.2361 9.3975-1.4608 7.0228 3.1679 14.9482.287 21.5173z" filter="url(#dirt-filter)" />
						<path d="M175.0617 252.5994c1.2855-5.2165 1.7217-13.6393 4.2318-17.1951 2.51-3.5559 7.0937-2.2446 11.393-3.528 4.2991-1.2836 8.3142-5.162 11.7806-5.8158 3.4664-.654 6.3839 1.9162 6.264 6.1114-.1199 4.1952-3.2768 10.0156-7.117 14.5538-3.84 4.5383-8.3635 7.7946-10.36 10.8032-1.9965 3.0087-1.4662 5.7693.3015 7.3787 1.7678 1.6095 4.7726 2.068 4.772 3.893-.0006 1.8249-3.0064 5.0161-5.9148 5.6662-2.9084.65-5.7197-1.2415-8.9656-1.2696-3.246-.028-6.9263 1.8075-10.7851 1.261-3.8588-.5466-7.8963-3.4755-9.1158-6.2683-1.2195-2.7927.3793-5.4492 2.1759-6.4854 1.7965-1.0361 3.7905-.452 5.8547-1.1652 2.0643-.7132 4.1992-2.7235 5.4848-7.94z" filter="url(#dirt-filter)" />
					</g>
				</g>

				<g class="fire">
					<path class="base" d="M133.336 238.045c-6.279 12.052-5.874 9.949-7.74 15.495-1.912 5.684-2.488 17.145-.607 22.157 2.313 6.16 7.035 8.002 12.541 8.277 2.343.116 4.218.108 5.755-.168 2.476 5.02 6.868 6.595 11.922 6.848 4.124.206 6.165-.156 7.968-1.428 1.571 1.884 3.445 3.421 4.999 3.895 6.401 1.956 15.787 4.864 19.723-.55.175-.239.342-.475.503-.707 3 1.808 7.443 1.223 10.781 1.32 7.817.227 9.967.037 13.575-5.601.159-.249.286-.507.387-.774 2.193 2.17 5.815 2.822 9.946 2.269 6.879-.922 8.275-1.283 10.244-5.116.294.128.588.24.879.329 6.402 1.956 10.365-2.58 12.836-4.962 4.732-4.561 4.768-12.29 4.262-17.139-.971-9.312-2.033-11.862-8.246-18.567-.164 10.735-2.184 19.329-5.961 22.356-.823.659-2.094 1.319-2.955 1.767-.503-1.735-1.091-3.241-1.649-4.293-2.302-4.337-5.047-7.612-13.707-14.755 1.386 11.085 3.129 16.923-3.236 23.646-1.747 1.846-2.912 3.471-4.742 4.452-.962-2.442-1.262-3.527-1.862-6.432-1.893-9.168-5.888-13.694-11.257-22.429-1.645 10.648-1.883 12.351-5.015 21.671-.443 1.319-1.256 2.439-2.189 3.545-.14-.617-.272-1.201-.421-1.87-2.029-9.139-10.358-16.365-16.571-23.07-.164 10.735 2.993 16.192-3.66 23.432-1.049 1.141-2.204 1.899-3.343 2.506-.66-1.903-1.174-3.82-2.781-5.356-6.229-5.953-4.033-10.867-6.563-20.454-8.776 10.238-9.417 11.781-11.878 17.306-.142.318-.281.638-.419.96-.82-.737-4.051-1.719-5.667-4.98-3.828-7.726-3.322-13.992-5.852-23.58Z" fill="url(#fire-base-fill)" />
					<path class="spark" d="M131.5001 252.7418s-4.0135 10.843-3.2006 16.525c.5473 3.8253 1.861 9.1093 5.579 10.162 3.4763.9844 7.5522-1.817 8.0267-5.3986.4336-3.2726-3.5866-3.7557-6.5687-6.7728-3.574-3.6161-3.8364-14.5156-3.8364-14.5156z" />
					<path class="spark" d="M152.798 261.8452s-4.1816 7.122-4.673 11.1092c-.4512 3.6601-.7357 8.1523 1.685 10.9345 1.9237 2.211 5.6225 3.3986 8.421 2.5281 2.2453-.6984 4.148-3.1431 3.741-5.459-.4424-2.5168-4.3755-2.9074-6.0754-5.9914-2.2058-4.0015-3.0987-13.1214-3.0987-13.1214z" />
					<path class="spark" d="M179.421 263.445s4.809 6.1676 5.8653 10.008c1.2687 4.6131 2.329 11.2618-.6754 14.9852-2.1785 2.6998-5.9325 2.7707-9.2943 1.914-2.1191-.54-4.2783-2.293-4.8674-4.399-.6246-2.2332.445-4.938 1.9923-6.6653 1.5648-1.7468 4.6517-2.7083 5.9843-4.6382 2.4832-3.5962.9952-11.2046.9952-11.2046z" />
					<path class="spark" d="M199.812 263.1777s4.2831 9.1367 5.4155 14.0154c.7581 3.2661 3.0319 7.4506.8782 10.0204-2.2825 2.7235-7.786 3.0856-10.6187.9402-1.9204-1.4544-2.2705-4.8815-1.337-7.1023.8118-1.9315 1.6408-2.814 3.5467-5.2495 2.5166-3.2159 2.1154-12.6242 2.1154-12.6242z" />
					<path class="spark" d="M225.233 262.2807s3.5823 4.3462 4.2144 6.9935c.8482 3.5523 1.2313 7.8955-.8056 10.9269-1.6541 2.4617-5.1045 4.73-7.9683 3.9589-2.04-.5494-3.7237-3.189-3.4924-5.289.2428-2.2045 3.129-2.8423 5.435-5.33 2.8113-3.0328 2.6168-11.2603 2.6168-11.2603z" />
					<path class="spark" d="M246.0091 259.6648s1.581 8.6708.4031 12.1271c-.996 2.9228-2.4787 5.5047-5.3294 6.691-1.6315.679-3.6007 1.674-6.0622.1917-1.2408-.7472-1.3097-2.8291.5185-5.0284 1.6575-1.994 3.5113-2.5523 5.5659-4.5228 3.7578-3.604 4.9041-9.4586 4.9041-9.4586z" />
				</g>

				<g class="flares">
					<path d="M207.5948 184.4087c10.8116-10.6865 21.623-21.373 37.1916-30.3458 15.5686-8.9729 35.8932-16.2318 54.264-13.5172 18.3709 2.7147 34.7867 15.4022 51.2027 28.0897" />
					<path d="M164.5854 187.4231c-2.5854-22.693-5.1708-45.3862-12.3066-65.722-7.1358-20.3356-18.8218-38.313-36.1904-47.2528-17.3686-8.9398-40.4189-8.8412-55.7886-2.1066-15.3698 6.7345-23.058 20.1045-30.7463 33.4747" />
					<path d="M195.0614 190.3225c7.6332-27.3656 15.2664-54.7315 29.5057-78.3597 14.2392-23.6282 35.0835-43.5179 55.1282-53.2133s39.2883-9.1963 50.9397-1.3263c11.6514 7.8701 15.7103 23.1103 19.7692 38.3504" />
					<path d="M145.0606 191.863c-5.7267-12.8836-11.4535-25.7676-21.373-32.9713-9.9195-7.2038-24.0312-8.7269-34.5503-4.1223-10.519 4.6047-17.4445 15.3366-24.2014 32.1068-6.7568 16.7702-13.3446 39.5773-19.9324 62.3847" />
				</g>

				<g class="whirl">
					<path d="M182.7118 192.3543c-1.3574-5.9411-2.7148-11.8824 1.8208-16.0312 4.5357-4.1488 14.9637-6.5045 23.1351-6.3326 8.1715.172 14.0852 2.8712 18.1888 7.149 4.1037 4.278 6.397 10.1337 6.546 17.0667.1489 6.933-1.8464 14.9426-17.3692 19.063-15.5229 4.1205-44.5717 4.3515-60.7382-1.5108-16.1664-5.8623-19.4484-17.8178-22.7306-29.7739" />
					<path d="M204.2943 190.914c-7.8708 5.0948-15.7416 10.1894-24.1148 8.2068-8.3732-1.9827-17.2482-11.0425-17.5161-18.5791-.268-7.5366 8.0716-13.5488 21.655-17.0733 13.5833-3.5246 32.409-4.5613 43.8722.6918s15.5629 16.7954 19.6625 28.3376" />
					<path d="M163.5768 193.357c-1.367-6.5686-2.734-13.1373 5.8157-15.9183 8.5497-2.781 27.015-1.7736 37.732 1.5371 10.717 3.3108 13.6848 8.9243 11.0603 14.6163-2.6244 5.692-10.8406 11.4622-23.5884 12.9553-12.7478 1.493-30.0263-1.2914-38.8286-5.9616-8.8023-4.6703-9.1279-11.2262-8.1601-17.7362.9678-6.51 3.2288-12.9732 8.847-18.33 5.6182-5.3568 14.5928-9.6063 23.5674-13.856" />
				</g>

  			<path class="drop" d="M201.4134 32.961c0 3.6216-.9287 10.3468-3.2396 12.7813-2.4742 2.6067-6.4615.7975-10.3392.7975-3.8943 0-8.5183-.2401-10.9944-2.8663-2.2922-2.4312-2.5845-7.1074-2.5845-10.7125 0-2.7931 2.1165-6.3257 3.5624-8.4841 2.4362-3.637 5.3102-5.0948 10.0165-5.0948 4.0046 0 6.0937 2.8237 8.579 5.5814 2.169 2.4065 4.9998 4.5027 4.9998 7.9975z" fill="url(#drop-fill)" />
			</svg>

			<ul class="SelectedIngredients">
			</ul>
		</div>

		<div class="Cards">
			{% for section, section_label in sections %}
				<input id="selectedsection-{{ section }}" name="selectedsection" type="radio" value="{{ section }}" />
				<label class="CategorySelector section" for="selectedsection-{{ section }}">{{ section_label }}</label>
			{% endfor %}

			{% for _ in missing_sections %}
				<span class="spacer"></span>
			{% endfor %}

			<span class="delimiter" style="display: none"></span>
		</div>

		<div id="results-container" class="Results empty">
			<div class="content-container">
				<div class="inner-content"></div>
			</div>
			<div class="top-holster"></div>
			<div class="backside"></div>
			<div class="bottom-holster"></div>
		</div>

		<div class="Attribution">
			<p><small>
				The data behind this project is merged from different sources, used according to their respective licenses:
				<a href="https://cosylab.iiitd.edu.in/flavordb/" target="_blank" referrerpolicy="no-referrer" crossorigin="anonymous">FlavorDB</a>
				(<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank" referrerpolicy="no-referrer" crossorigin="anonymous">CC BY-NC-SA 3.0</a>)
				and
				<a href="https://foodb.ca/" target="_blank" referrerpolicy="no-referrer" crossorigin="anonymous">FooDB</a>
				(<a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" referrerpolicy="no-referrer" crossorigin="anonymous">CC BY-NC 4.0</a>).
				Thank you to the contributors to these databases.
			</small></p>
		</div>
	</div>

	<div class="Screensize-Blocker">
		<p>
			<strong>Heads up!</strong>
			This application isn't quite optimized for screens this small.
			Why don't you visit again from a different device?
		</p>
	</div>


	<script type="text/javascript">
		document.querySelectorAll(".NoScript")
			.forEach((element) => element.remove())

		document.querySelectorAll("input[name=selectedsection]").forEach((selectedSectionInput) => {
			selectedSectionInput.addEventListener("input", async () => {
				if (!selectedSectionInput.checked) {
					return
				}

				// Remove the stuff from the old section.
				document.querySelectorAll(".Cards > .delimiter ~ *")
					.forEach((element) => element.remove())

				// Keep the inputs disabled until we have our result.
				document.querySelectorAll("input[name=selectedsection]")
					.forEach((element) => element.disabled = true)
				function finish() {
					document.querySelectorAll("input[name=selectedsection]")
						.forEach((element) => element.disabled = false)
				}

				const response = await fetch(
					`{% url "section_cards" %}?section=${encodeURIComponent(selectedSectionInput.value)}`
				)
				if (!response.ok) {
					alert(`Error: could not get ingredients. Sorry!`)
					finish()
					return
				}

				document.querySelector(".Cards > .delimiter")
					.insertAdjacentHTML("afterend", await response.text())

				// Make sure the inputs for the already selected ingredients are also
				// selected.
				for (const element of document.querySelectorAll(".SelectedIngredients [data-ingredient]")) {
					const checkbox = document.querySelector(`.Cards input[type=checkbox][data-ingredient="${encodeURIComponent(element.dataset.ingredient)}"]`)
					if (checkbox) {
						checkbox.checked = true
					}
				}

				for (const checkbox of document.querySelectorAll(".Cards input[type=checkbox][data-ingredient]")) {
					const ingredientSelector = `[data-ingredient="${encodeURIComponent(checkbox.dataset.ingredient)}"]`;

					checkbox.addEventListener("input", () => {
						checkbox.blur()

						if (checkbox.checked) {
							const listItem = document.createElement("li")
							const button = document.createElement("button")
							button.dataset.ingredient = checkbox.dataset.ingredient
							button.innerText = checkbox.dataset.label
							listItem.append(button)
							document.querySelector(".SelectedIngredients").append(listItem)

							button.addEventListener("click", () => {
								button.parentElement.remove()
								const checkbox = document.querySelector(`.Cards input[type=checkbox]${ingredientSelector}`);
								if (checkbox) {
									checkbox.checked = false;
								}
							})

							// Play the animation
							const cauldronElement = document.querySelector(".Cauldron")
							if (!cauldronElement.classList.contains("dropping")) {
								const nextHue = Math.floor(Math.random() * 360)
								cauldronElement.style.setProperty("--drop-hue", nextHue)
								const dropRotation = Math.floor(Math.random() * 360)
								cauldronElement.style.setProperty("--drop-rotation", `${dropRotation}deg`)

								cauldronElement.classList.add("dropping")
								window.setTimeout(
									() => cauldronElement.style.setProperty("--hue", nextHue),
									1800,
								)
								window.setTimeout(
									() => cauldronElement.classList.remove("dropping"),
									2400,
								)
							}
						} else {
							document
								.querySelector(`.SelectedIngredients > li > button${ingredientSelector}`)
								.parentElement
								.remove()
						}
					})
				}

				document.querySelector("input[name=selectedcategory]").checked = true
				finish()
			})
		})

		const resultsElement = document.getElementById("results-container")
		document.getElementById("results-button").addEventListener("click", async () => {
			resultsElement.classList.add("empty")

			const selectedIngredients = Array.from(
				document.querySelectorAll(".SelectedIngredients [data-ingredient]")
			).map((element) => element.dataset.ingredient).join(",")

			const response = await fetch(
				`{% url "pairing_results" %}?ingredients=${encodeURIComponent(selectedIngredients)}`
			)
			if (!response.ok) {
				alert(`Error: could not get results. Sorry!`)
				return
			}
			resultsElement.querySelector(".inner-content").innerHTML = await response.text()

			resultsElement.classList.remove("empty")
		})
	</script>
{% endblock %}
